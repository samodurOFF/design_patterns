from jinja2 import Template


def render(template_name, **kwargs):
    """
    Минимальный пример работы с шаблонизатором
    :param template_name: имя шаблона
    :param kwargs: параметры для передачи в шаблон
    :return:
    """
    # Открываем шаблон по имени
    with open(template_name, encoding='utf-8') as f:
        # Читаем
        template = Template(f.read())
    # рендерим шаблон с параметрами
    return template.render(**kwargs)


if __name__ == '__main__':
    # Пример использования
    params = {'user': 'DANIL', 'title': 'CGI переменные окружения',
              'table': '<table>\n<thead>\n<tr><th>key</th><th>value                                                                                                                                  </th></tr>\n</thead>\n<tbody>\n<tr><td>SERVER_NAME                   </td><td>samodurOFF-HOME                                                                                                                        </td></tr>\n<tr><td>GATEWAY_INTERFACE             </td><td>CGI/1.1                                                                                                                                </td></tr>\n<tr><td>SERVER_PORT                   </td><td>8000                                                                                                                                   </td></tr>\n<tr><td>REMOTE_HOST                   </td><td>                                                                                                                                       </td></tr>\n<tr><td>CONTENT_LENGTH                </td><td>                                                                                                                                       </td></tr>\n<tr><td>SCRIPT_NAME                   </td><td>                                                                                                                                       </td></tr>\n<tr><td>SERVER_PROTOCOL               </td><td>HTTP/1.1                                                                                                                               </td></tr>\n<tr><td>SERVER_SOFTWARE               </td><td>WSGIServer/0.2                                                                                                                         </td></tr>\n<tr><td>REQUEST_METHOD                </td><td>GET                                                                                                                                    </td></tr>\n<tr><td>PATH_INFO                     </td><td>/cgi_vars/                                                                                                                             </td></tr>\n<tr><td>QUERY_STRING                  </td><td>                                                                                                                                       </td></tr>\n<tr><td>REMOTE_ADDR                   </td><td>127.0.0.1                                                                                                                              </td></tr>\n<tr><td>CONTENT_TYPE                  </td><td>text/plain                                                                                                                             </td></tr>\n<tr><td>HTTP_HOST                     </td><td>localhost:8000                                                                                                                         </td></tr>\n<tr><td>HTTP_CONNECTION               </td><td>keep-alive                                                                                                                             </td></tr>\n<tr><td>HTTP_CACHE_CONTROL            </td><td>max-age=0                                                                                                                              </td></tr>\n<tr><td>HTTP_SEC_CH_UA                </td><td>&quot;Not?A_Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;108&quot;, &quot;Google Chrome&quot;;v=&quot;108&quot;                                                                       </td></tr>\n<tr><td>HTTP_SEC_CH_UA_MOBILE         </td><td>?0                                                                                                                                     </td></tr>\n<tr><td>HTTP_SEC_CH_UA_PLATFORM       </td><td>&quot;Windows&quot;                                                                                                                              </td></tr>\n<tr><td>HTTP_DNT                      </td><td>1                                                                                                                                      </td></tr>\n<tr><td>HTTP_UPGRADE_INSECURE_REQUESTS</td><td>1                                                                                                                                      </td></tr>\n<tr><td>HTTP_USER_AGENT               </td><td>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36                        </td></tr>\n<tr><td>HTTP_ACCEPT                   </td><td>text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9</td></tr>\n<tr><td>HTTP_SEC_FETCH_SITE           </td><td>none                                                                                                                                   </td></tr>\n<tr><td>HTTP_SEC_FETCH_MODE           </td><td>navigate                                                                                                                               </td></tr>\n<tr><td>HTTP_SEC_FETCH_USER           </td><td>?1                                                                                                                                     </td></tr>\n<tr><td>HTTP_SEC_FETCH_DEST           </td><td>document                                                                                                                               </td></tr>\n<tr><td>HTTP_ACCEPT_ENCODING          </td><td>gzip, deflate, br                                                                                                                      </td></tr>\n<tr><td>HTTP_ACCEPT_LANGUAGE          </td><td>ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7                                                                                                    </td></tr>\n<tr><td>HTTP_COOKIE                   </td><td>Pycharm-67aca5d7=abc24daf-dc6d-411c-8722-ffc830b6bf2e; Pycharm-67aca5d8=cca6dbe0-4fda-494b-bcb3-053827f4563f                           </td></tr>\n<tr><td>wsgi.input                    </td><td>&lt;_io.BufferedReader name=676&gt;                                                                                                          </td></tr>\n<tr><td>wsgi.errors                   </td><td>&lt;_io.TextIOWrapper name=&#x27;&lt;stderr&gt;&#x27; mode=&#x27;w&#x27; encoding=&#x27;utf-8&#x27;&gt;                                                                          </td></tr>\n<tr><td>wsgi.version                  </td><td>(1, 0)                                                                                                                                 </td></tr>\n<tr><td>wsgi.run_once                 </td><td>False                                                                                                                                  </td></tr>\n<tr><td>wsgi.url_scheme               </td><td>http                                                                                                                                   </td></tr>\n<tr><td>wsgi.multithread              </td><td>False                                                                                                                                  </td></tr>\n<tr><td>wsgi.multiprocess             </td><td>False                                                                                                                                  </td></tr>\n<tr><td>wsgi.file_wrapper             </td><td>&lt;class &#x27;wsgiref.util.FileWrapper&#x27;&gt;                                                                                                     </td></tr>\n</tbody>\n</table>'}

    output_test = render('index.html', **params)
    # with open('index.html', 'w', encoding='utf-8') as f:
    #     f.write(output_test)
    print(type(output_test))
